---
import ib from "../assets/islas-ballestas.jpg";
import rnp from "../assets/roja.jpeg";
import huacachina from "../assets/huacachina.jpeg";

const images = [ib.src, rnp.src, huacachina.src];
---

<div class="relative w-full h-full overflow-hidden">
  <div class="absolute top-0 left-0 w-full h-full">
    {
      images.map((image, index) => (
        <img
          src={image}
          alt={`Slide ${index + 1}`}
          class={`absolute w-full h-full object-cover opacity-0 transition-opacity duration-1000 ${
            index === 0 ? "opacity-100" : ""
          }`}
        />
      ))
    }
  </div>

  <button
    id="prev"
    class="absolute top-1/2 left-4 transform -translate-y-1/2 text-white bg-black bg-opacity-50 p-4 rounded-full"
    aria-label="Previous Slide"
  >
    &lt;
  </button>

  <button
    id="next"
    class="absolute top-1/2 right-4 transform -translate-y-1/2 text-white bg-black bg-opacity-50 p-4 rounded-full"
    aria-label="Next Slide"
  >
    &gt;
  </button>
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    let currentIndex = 0;
    const slides = document.querySelectorAll("div > img");
    const prevButton = document.getElementById("prev");
    const nextButton = document.getElementById("next");

    if (prevButton && nextButton) {
      function changeSlide() {
        slides.forEach((slide, i) => {
          slide.classList.remove("opacity-100");
          slide.classList.add("opacity-0");
        });

        currentIndex = (currentIndex + 1) % slides.length;
        slides[currentIndex].classList.add("opacity-100");
      }

      nextButton.addEventListener("click", () => {
        currentIndex = (currentIndex + 1) % slides.length;
        changeSlide();
      });

      prevButton.addEventListener("click", () => {
        currentIndex = (currentIndex - 1 + slides.length) % slides.length;
        changeSlide();
      });

      setInterval(changeSlide, 5000);
    }
  });
</script>
