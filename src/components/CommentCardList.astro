---
import CommentCard from "./CommentCard.astro";

const users = await fetch(
  "https://randomuser.me/api/?results=20&inc=name,picture"
)
  .then((res) => res.json())
  .then((data) => data.results);
---

<div
  class="relative w-full overflow-hidden h-[48rem] bg-gray-900 rounded-lg shadow-md"
>
  <div
    class="absolute inset-0 w-full h-full bg-no-repeat bg-cover bg-[linear-gradient(to_top,_rgba(0,0,0,0.9),_transparent),url('../assets/huacachina.jpeg')]"
  >
  </div>
</div>
<div
  class="flex gap-4 w-fit animate-scroll whitespace-nowrap absolute bottom-4"
  style="animation: scroll-left 40s linear infinite;"
>
  {
    users.map(
      (user: {
        name: { first: string; last: string };
        picture: { large: string };
      }) => (
        <CommentCard
          imagen={user.picture.large}
          nombre={`${user.name.first} ${user.name.last}`}
          cargo="Cliente"
          comentario="Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam, provident deleniti quisquam."
        />
      )
    )
  }
  <!-- Duplicamos para hacer bucle infinito -->
  {
    users.map(
      (user: {
        name: { first: string; last: string };
        picture: { large: string };
      }) => (
        <CommentCard
          imagen={user.picture.large}
          nombre={`${user.name.first} ${user.name.last}`}
          cargo="Cliente"
          comentario="Lorem ipsum dolor sit amet consectetur adipisicing elit. Laboriosam, provident deleniti quisquam."
        />
      )
    )
  }
</div>

<style>
  @keyframes scroll-left {
    0% {
      transform: translateX(0);
    }
    100% {
      transform: translateX(-25%);
    }
  }
</style>
